<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap>
	<typeAlias alias="DailyReport" type="com.dianping.cat.notify.model.DailyReport"/>
	<sql id="DailyReport.columns">
		id,type,name,ip,domain,period,content,creation_date
	</sql>
	<resultMap id="DailyReportResult" class="DailyReport">
		<result property="id" column="id" nullValue="0" />
		<result property="type" column="type" />
		<result property="name" column="name" nullValue="" />
		<result property="ip" column="ip" nullValue="" />
		<result property="domain" column="domain" nullValue="" />
		<result property="period" column="period" />
		<result property="content" column="content" nullValue="" />
		<result property="creation_date" column="creation_date"/>
	</resultMap>
    <select id="DailyReport.selectReport" resultMap="DailyReportResult" >
    	select <include refid="DailyReport.columns"/> 
    	from dailyreport 
    	where <![CDATA[ period>=#startDate# and period<#endDate#
   		      ]]>      
              <isNotEmpty prepend="AND" property="domain">
            	  domain=#domain# 
        	  </isNotEmpty>
        	  <isNotEmpty prepend="AND" property="name">
            	  domain=#name# 
        	  </isNotEmpty>
        	  <isNotEmpty prepend="AND" property="type">
            	  type=#type# 
        	  </isNotEmpty>
    </select>
</sqlMap>
